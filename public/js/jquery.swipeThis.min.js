/* 
  swipeThis v0.78.0 jQuery Plugin
  author: Fortes [at] noumeni.us
*/
(function(a){function k(a,c,d){var e=a.parent(),f=e.children(".swipeArea");i(e,c,d),j(a,c,d);if(d.multiple){var g=e.parent().width(),h=c.width+d.marginRight;f.width(g),c.visible=parseInt(g/h)}else f.width(c.width+d.marginRight),c.visible=1;f.css("min-height",parseInt(d.itemHeight)+"px"),f.height(c.height),b&&f.css("border","2px solid red"),a.width(c.count*(c.width+d.marginRight)),c.active=c.active+c.visible>=c.count?c.count-c.visible:c.active,a.animate({left:-c.active*(c.width+d.marginRight)},d.speed,d.easein);var k=e.children(".swipeIndicator");if(k.has(":visible").lenght!=0){var l;d.multiple?l=parseInt(e.parent().width()-48):l=parseInt(c.width-48);var m=parseInt(c.height/2-24);k.css({"margin-top":m+"px","margin-left":l+"px"})}}function j(c,d,e){c.find("li").each(function(){var c=a(this);c.css("height",d.height),c.css("width",d.width),c.css("min-height",parseInt(e.itemHeight)+"px"),c.css("marginRight",e.marginRight+"px");var f=c.find("img");f&&(f.load(function(){var a,c,g,h,i,j;a=f.width,c=f.height,e.fillContainer?(g=d.width,h=g/a*c):a/d.width<c/d.height?(g=d.width,h=g/a*c):(h=d.height,g=h/d.height*a),i=(d.height-h)/2,j=(d.width-g)/2,f.css({"margin-top":i+"px","margin-left":j+"px",height:h+"px",width:g+"px"}),b&&console.log("EndimgResize:"+f.attr("src")+"("+g+","+h+")")}),f.complete&&f.trigger("load"))})}function i(a,b,c){c.fullScreen?(b.width=screen.width,b.height=screen.height):c.fillContainer?(b.width=a.parent().width(),b.height=a.parent().height()):(b.width=parseInt(c.itemWidth),b.height=parseInt(c.itemHeight))}var b=!1,c=a.support.touch,d="touchmove scroll",e=c?"touchstart":"mousedown",f=c?"touchend":"mouseup",g=c?"touchmove":"mousemove";touchResizeEvent=c?"orientationchange":"resize";var h={init:function(d){return this.each(function(){var h=a(this);data=h.data("swipeThis");if(!data){var i={multiple:!1,fillContainer:!0,fullScreen:!1,indicator:"",itemHeight:140,itemWidth:170,marginRight:0,speed:100,easein:"",tolerance:.5};d&&a.extend(i,d);var j={count:h.children().length,visible:0,active:0,height:0,width:0},l={touching:!1,x:0,xOffset:0};h.wrap('<div class="swipeThis"/>');var m=h.parent();m.prepend('<div class="swipeArea"/>');var n=m.children(".swipeArea");k(h,j,i);if(i.indicator!=""){m.children(".swipeIndicator").remove();var o;i.multiple?o=parseInt(m.parent().width()-48):o=parseInt(j.width-48);var p=parseInt(j.height/2-24);n.after('<div class="swipeIndicator" style="z-index:100;pointer-events: none;position: absolute; margin-left: '+o+"px;"+"margin-top: "+p+'px;">'+'<img src="'+i.indicator+'" border="0" alt=""/>'+"</div>")}a(window).bind(touchResizeEvent,function(a){if(h.has(":visible").length!=0){var b=h.data("swipeThis");b&&(k(h,b.items,b.settings),h.data("swipeThis",{items:b.items,settings:b.settings}))}}),n.bind(e,function(a){b&&console.log("touchStart");if(!l.touching){var c=a.originalEvent.touches?a.originalEvent.touches[0]:a;l.touching=!0,l.x=c.pageX}return!1}),n.bind(g,function(a){if(l.touching){var b=a.originalEvent.touches?a.originalEvent.touches[0]:a;l.xOffset=b.pageX-l.x,h.css("left",-j.active*(j.width+i.marginRight)+l.xOffset)}return!1}),n.bind(f,function(c){b&&console.log("touchEnd - xOffset:"+l.xOffset),l.touching=!1;if(!l.xOffset){b&&console.log("Tap/Click Event");var d=c.originalEvent.changedTouches?c.originalEvent.changedTouches[0]:c;h.children("li").each(function(){var b=a(this),c=b.find("a");if(c.attr("href")!=undefined){var e=d.pageX,f=d.pageY,g=b.offset(),h=b.width(),i=b.height();e>g.left&&e<g.left+h&&f>g.top&&f<g.top+i&&c.click()}});return!1}var e=parseInt(j.width),f=1;i.multiple&&(f=Math.abs(parseInt(l.xOffset/e))+1);var g=e/2-e*i.tolerance;-l.xOffset>g?(j.active+=f,j.active=j.active+j.visible>=j.count?j.count-j.visible:j.active):l.xOffset>g&&(j.active-=f,j.active=j.active<0?0:j.active),h.animate({left:-j.active*(j.width+i.marginRight)},i.speed,i.easein),i.indicator&&h.children(".swipeIndicator").css("display")!="none"&&a(".swipeIndicator").hide(),l.xOffset=0;return!1}),c||n.mouseleave(function(a){l.xOffset&&n.mouseup()}),h.data("swipeThis",{items:j,settings:i})}})},reposition:function(){return this.each(function(){var b=a(this);data=b.data("swipeThis"),data&&(k(b,data.items,data.settings),b.data("swipeThis",data))})},destroy:function(){return this.each(function(){var b=a(this),c=b.data("swipeThis");a(window).unbind(".swipethis"),b.removeData("swipeThis")})}};a.fn.swipeThis=function(b){if(h[b])return h[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b=="object"||!b)return h.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.swipeThis")}})(jQuery)